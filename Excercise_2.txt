CREATE TABLE SUPPLIER(
SID INT PRIMARY KEY,
SNAME VARCHAR(20) NOT NULL,
SADD VARCHAR(20) NOT NULL
);

CREATE TABLE PARTS(
PID INT PRIMARY KEY,
PNAME VARCHAR(20) NOT NULL,
PCOLOUR VARCHAR(20) NOT NULL
);

CREATE TABLE SUPPLY(
SID INT,
PID INT,
QUANTITY INT NOT NULL,
FOREIGN KEY(SID) REFERENCES SUPPLIER(SID) ON DELETE CASCADE,
FOREIGN KEY(PID) REFERENCES PARTS(PID) ON DELETE CASCADE,
PRIMARY KEY(SID,PID)
);

INSERT INTO SUPPLIER VALUES(100,'RYAN','VARS');
INSERT INTO SUPPLIER VALUES(101,'SAKET','BANASWADI');
INSERT INTO SUPPLIER VALUES(107,'SHARATH','RAMAIAH');

INSERT INTO PARTS VALUES(1,'SCREW','RED');
INSERT INTO PARTS VALUES(2,'NAIL','BLUE');
INSERT INTO PARTS VALUES(3,'NAIL','RED');

INSERT INTO SUPPLY VALUES(100,3,5);
INSERT INTO SUPPLY VALUES(100,2,2);
INSERT INTO SUPPLY VALUES(101,2,3);
INSERT INTO SUPPLY VALUES(100,1,2);
INSERT INTO SUPPLY VALUES(107,1,3);
INSERT INTO SUPPLY VALUES(101,1,2);

SELECT * FROM PARTS WHERE PID IN
(SELECT PID FROM SUPPLY WHERE SID IN
(SELECT SID FROM SUPPLIER WHERE SNAME='SAKET'));

SELECT SNAME FROM SUPPLIER WHERE SID IN
(SELECT SID FROM SUPPLY WHERE PID IN
(SELECT PID FROM PARTS WHERE PNAME='NAIL'));

DELETE FROM PARTS WHERE PCOLOUR='BLUE';

SELECT SUPPLY.SID, SNAME, COUNT(SUPPLY.SID) FROM SUPPLIER, SUPPLY
WHERE SUPPLIER.SID=SUPPLY.SID
GROUP BY SUPPLY.SID, SNAME
HAVING COUNT(SUPPLY.SID)=2;

//mongodb
